{
  "name": "SysML",
  "scopeName": "source.sysml",
  "fileTypes": [".sysml"],
  "uuid": "0e3ad755-0866-4d5d-ae1f-05d25ffdc236",
  "patterns": [
    { "include": "#blocks" },
    { "include": "#comments" },
    { "include": "#keywords" },
    { "include": "#ocl" }
  ],
 "repository": {
    "comments": {
      "patterns": [
        {
          "match": "--.*$",
          "name": "comment.sysml"
        }
      ]
    },
    "headers": {
      "patterns": [

      ]
    },
    "blocks": {
      "patterns": [
        {
          "begin": "^(\\s*)(block)(\\s+([\\p{L}$_][\\p{L}$_0-9]*))",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "keyword.sysml" },
            "4": { "name": "entity.name.type" }
          },
          "patterns": [
            { "include": "#compartments" }
          ]
        }
      ]
    },
    "parameter": {
      "patterns": [
        {
          "match": "([\\p{L}$_][\\p{L}$_0-9]*)\\s*:\\s*([\\p{L}$_][\\p{L}$_0-9]*)",
          "captures": {
            "1": { "name": "variable.parameter" },
            "2": { "name": "entity.name.type" }
          }
        }
      ]
    },
    "operation": {
      "patterns": [
        {
          "begin": "^(\\s*)([\\p{L}$_][\\p{L}$_0-9]*)\\s*\\(\\s*(([\\p{L}$_][\\p{L}$_0-9]*)\\s*:\\s*([\\p{L}$_][\\p{L}$_0-9]*))?(\\s*,\\s*([\\p{L}$_][\\p{L}$_0-9]*)\\s*:\\s*([\\p{L}$_][\\p{L}$_0-9]*))*\\s*\\)",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "entity.name.method" },
            "4": { "name": "variable.parameter" },
            "5": { "name": "entity.name.type" },
            "7": { "name": "variable.parameter" },
            "8": { "name": "entity.name.type" }
          },
          "patterns": [
            {
              "begin": "^(\\s*)(?=(pre|post)\\b)",
              "end": "^(?!\\1\\s+|\\s*--)",
              "patterns": [
                { "include": "source.ocl" }
              ]
            }
          ]
        }
      ]
    },
    "reference": {
      "patterns": [
        {
          "begin": "^(\\s*)([\\p{L}$_][\\p{L}$_0-9]*)\\s*(?::\\s*([\\p{L}$_][\\p{L}$_0-9]*))(?:\\s*\\[(?:[0-9]+|\\*)(\\.\\.(?:[0-9]+|\\*))?\\])?(?:\\s*<-\\s*([\\p{L}$_][\\p{L}$_0-9]*))?(?=\\s*$|\\s*\\{[^\\}]*\\s*\\}?\\s*$)",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "variable.other" },
            "3": { "name": "entity.name.type" },
            "5": { "name": "variable.other" }
          },
          "patterns": [
            { "include": "#ocl" }
          ]
        }
      ]
    },
    "value": {
      "patterns": [
        {
          "begin": "^(\\s*)([\\p{L}$_][\\p{L}$_0-9]*)\\s*(?::\\s*([\\p{L}$_][\\p{L}$_0-9]*))(?:\\s*\\[(?:[0-9]+|\\*)(\\.\\.(?:[0-9]+|\\*))?\\])?(?=\\s*$|\\s*\\{[^\\}]*\\s*\\}?\\s*$)",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "variable.other" },
            "3": { "name": "entity.name.type" }
          },
          "patterns": [
            { "include": "#ocl" }
          ]
        }
      ]
    },
    "port": {
      "patterns": [
        {
          "begin": "^(\\s*)(?:(in|out|inout)\\s+)?(?:([\\p{L}$_][\\p{L}$_0-9]*))?(?:\\s*:\\s*([\\p{L}$_][\\p{L}$_0-9]*))?(?=\\s*$|\\s*\\{[^\\}]*\\s*\\}?\\s*$)",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "keyword.sysml" },
            "3": { "name": "variable.other" },
            "4": { "name": "entity.name.type" }
          },
          "patterns": [
            { "include": "#ocl" }
          ]
        }
      ]
    },
    "transition": {
      "patterns": [
        {
          "match": "^\\s*(receive)(?:\\s+([\\p{L}$_][\\p{L}$_0-9]*)|\\b)",
          "captures": {
            "1": { "name": "keyword.control.sysml" },
            "2": { "name": "variable.other.sysml" }
          }
        },
        {
          "match": "(?=/\\s*)([\\p{L}$_][\\p{L}$_0-9]*)\\b",
          "captures": {
            "1": { "name": "entity.name.method" }
          }
        },
        {
          "begin": "\\[",
          "end": "\\]|$",
          "patterns": [
            { "include": "source.ocl" }
          ]
        },

        {
          "match": "->\\s*(choose)\\b",
          "captures": {
            "1": { "name": "keyword.control.sysml" }
          }
        },
        {
          "match": "->\\s*([\\p{L}$_][\\p{L}$_0-9]*)\\b",
          "captures": {
            "1": { "name": "entity.name.type.sysml" }
          }
        }
      ]
    },
    "state": {
      "patterns": [
        {
          "begin": "^(\\s*)(?:(initial)\\s+)?(state)(?:\\s+([\\p{L}$_][\\p{L}$_0-9]*))?\\s*$",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "keyword.sysml" },
            "3": { "name": "keyword.sysml" },
            "4": { "name": "entity.name.type" }
          },
          "patterns": [
            { "include": "#transition" }
          ]
        }
      ]
    },
    "stateMachine": {
      "patterns": [
        {
          "begin": "^(\\s*)(state\\s+machine)(?:\\s+([\\p{L}$_][\\p{L}$_0-9]*))?\\s*$",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "keyword.sysml" },
            "3": { "name": "entity.name.type" }
          },
          "patterns": [
            { "include": "#state" }
          ]
        }
      ]
    },
    "compartments": {
      "patterns": [
        {
          "begin": "^(\\s*)(operations)\\s*$",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "keyword.sysml" }
          },
          "patterns": [
            { "include": "#operation" }
          ]
        },
        {
          "begin": "^(\\s*)(constraints)\\s*$",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "keyword.sysml" }
          },
          "patterns": [
            { "include": "#ocl" }
          ]
        },
        {
          "disabled": 1,
          "begin": "^(\\s*)(references)\\s*$",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "keyword.sysml" }
          },
          "patterns": [
            { "include": "#reference" }
          ]
        },
        {
          "begin": "^(\\s*)(ports)\\s*$",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "keyword.sysml" }
          },
          "patterns": [
            { "include": "#port" }
          ]
        },
        {
          "begin": "^(\\s*)(values)\\s*$",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "keyword.sysml" }
          },
          "patterns": [
            { "include": "#value" }
          ]
        },
        {
          "begin": "^(\\s*)(owned\\s+behaviors)\\s*$",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "keyword.sysml" }
          },
          "patterns": [
            { "include": "#stateMachine" }
          ]
        },
        {
          "begin": "^(\\s*)(.*$)",
          "end": "^(?!\\1\\s+|\\s*--)",
          "beginCaptures": {
            "2": { "name": "entity.name.section.string" }
          },
          "contentName": "markup.raw"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.sysml",
          "match": "\\b(bdd|act|ibd|pkg|par|req|seq|stm|uc)\\b"
        },
        {
          "name": "keyword.control.sysml",
          "match": "\\b(receive|after|)\\b"
        }
      ]
    },
    "ocl": {
      "patterns": [
        {
          "begin": "\\{",
          "end": "\\}",
          "name": "meta.annotation",
          "patterns": [{ "include": "source.ocl" }]
        }
      ]
    }
  }
}